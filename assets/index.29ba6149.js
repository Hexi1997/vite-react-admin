import"./index.5ecc34b2.js";import{P as e}from"./index.4c6a01ec.js";import{r as t}from"./request.bf4d7ac6.js";import{r,R as n}from"./vendor.a5ae8b09.js";import{m as a,g as s,B as c,T as l,C as o,f as i}from"./antd.ff053a27.js";/* empty css                      */import"./recoil.3d42e3be.js";import"./classnames.ca41f454.js";import"./qs.2ee0d5a2.js";function m(e,t={}){const{params:n,onSuccess:a=(()=>{}),onFail:s=(()=>{})}=t,[c,l]=r.exports.useState(!1),[o,i]=r.exports.useState(),[m,u]=r.exports.useState(),d=r.exports.useRef(!1);return{loading:c,data:o,response:m,run:()=>{l(!0),e(n).then((e=>{d.current||(e.data&&i(e.data),u(e),a())})).catch((e=>{s(e)})).finally((()=>{l(!1)}))},cancel:()=>{d.current=!0,l(!1)}}}function u(){return t.get("/xxx/404")}function d(){return t.get("/article/detail?id=xxx")}function p(){return t.get("/article/detail?id=18c115d8-37df-4422-88c5-6b031eb19109")}function f(){return new Promise((e=>{setTimeout((()=>{e({code:0,data:{name:"Jone",age:33,www:!1},message:"success"})}),5e3)}))}var g="TestListPage_2gVpMM",E="buttonGroup_Prr1GD";const{Panel:b}=i;function x(){const{run:t}=m(u,{onFail:()=>{a.error("自定义请求失败消息: http error")}}),{run:r}=m(d,{onSuccess:()=>{a.success("请求0成功")},onFail:()=>{a.error("自定义请求失败消息: business error")}}),{loading:x,data:h,run:j}=m(p,{onSuccess:()=>{a.success("请求1成功")}}),{loading:S,data:k,run:w,cancel:y}=m(f,{onSuccess:()=>{a.success("请求2成功")}}),C=[{title:"request、useRequest 测试",children:n.createElement("div",null,n.createElement(s,{message:n.createElement("div",null,"测试前，需要启动一个后端服务。",n.createElement("a",{href:"https://github.com/percy507/koa2-template",target:"_blank",rel:"noreferrer"},"参考这里")),type:"warning",showIcon:!0}),n.createElement("div",{className:E},n.createElement(c,{onClick:()=>t()},"HTTP异常"),n.createElement(c,{onClick:()=>r()},"业务异常"),n.createElement(l,{placement:"bottom",title:n.createElement("pre",null,h?JSON.stringify(h,null,4):"暂无数据")},n.createElement(c,{loading:x,onClick:()=>j()},"测试响应成功1")),n.createElement(l,{placement:"bottom",title:n.createElement("pre",null,h?JSON.stringify(k,null,4):"暂无数据")},n.createElement(c,{loading:S,onClick:()=>w()},"测试响应成功2")),n.createElement(c,{onClick:()=>y()},"取消请求(测试响应成功2)")))}];return n.createElement(e,{className:g},n.createElement(o,{title:"各种测试集合"},n.createElement(i,{accordion:!0},C.map((e=>n.createElement(b,{header:e.title,key:e.title},e.children))))))}export{x as default};
