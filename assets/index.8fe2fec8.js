import{k as e,l as t,m as n,n as a,d as r,C as o,c as s,b as c,q as l,ae as i,as as u,a4 as m,at as p,a6 as d,a5 as f,ai as x,ah as E,aj as v,ak as b,an as g,B as h}from"./index.e469286f.js";import{P as y,C}from"./index.86d594b6.js";import"./index.144a7e32.js";import{r as k,C as N}from"./request.eca88b22.js";import{a as S}from"./index.ea0f2ea6.js";import{r as w,_ as j,R as O}from"./vendor.8ef37173.js";import"./index.4e68a9d8.js";var P=function(r){e(s,r);var o=t(s);function s(){var e;return n(this,s),(e=o.apply(this,arguments)).state={error:void 0,info:{componentStack:""}},e}return a(s,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,info:t})}},{key:"render",value:function(){var e=this.props,t=e.message,n=e.description,a=e.children,r=this.state,o=r.error,s=r.info,c=s&&s.componentStack?s.componentStack:null,l=void 0===t?(o||"").toString():t,i=void 0===n?c:n;return o?w.exports.createElement(L,{type:"error",message:l,description:w.exports.createElement("pre",null,i)}):a}}]),s}(w.exports.Component),_=globalThis&&globalThis.__rest||function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},M={success:m,info:p,error:d,warning:f},T={success:x,info:E,error:v,warning:b},I=function(e){var t,n,a=e.description,m=e.prefixCls,p=e.message,d=e.banner,f=e.className,x=void 0===f?"":f,E=e.style,v=e.onMouseEnter,b=e.onMouseLeave,g=e.onClick,h=e.afterClose,y=e.showIcon,C=e.closable,k=e.closeText,N=e.action,S=_(e,["description","prefixCls","message","banner","className","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","action"]),O=w.exports.useState(!1),P=r(O,2),I=P[0],L=P[1],q=w.exports.useRef(),R=w.exports.useContext(o),F=R.getPrefixCls,H=R.direction,J=F("alert",m),A=function(e){var t;L(!0),null===(t=S.onClose)||void 0===t||t.call(S,e)},B=!!k||C,G=void 0!==(n=S.type)?n:d?"warning":"info",Q=!(!d||void 0!==y)||y,D=s(J,"".concat(J,"-").concat(G),(c(t={},"".concat(J,"-with-description"),!!a),c(t,"".concat(J,"-no-icon"),!Q),c(t,"".concat(J,"-banner"),!!d),c(t,"".concat(J,"-rtl"),"rtl"===H),t),x),X=function(e){return Object.keys(e).reduce((function(t,n){return"data-"!==n.substr(0,5)&&"aria-"!==n.substr(0,5)&&"role"!==n||"data-__"===n.substr(0,7)||(t[n]=e[n]),t}),{})}(S);return w.exports.createElement(l,{visible:!I,motionName:"".concat(J,"-motion"),motionAppear:!1,motionEnter:!1,onLeaveStart:function(e){return{maxHeight:e.offsetHeight}},onLeaveEnd:h},(function(e){var t,n,r=e.className,o=e.style;return w.exports.createElement("div",j({ref:q,"data-show":!I,className:s(D,r),style:j(j({},E),o),onMouseEnter:v,onMouseLeave:b,onClick:g,role:"alert"},X),Q?(t=S.icon,n=(a?T:M)[G]||null,t?u(t,w.exports.createElement("span",{className:"".concat(J,"-icon")},t),(function(){return{className:s("".concat(J,"-icon"),c({},t.props.className,t.props.className))}})):w.exports.createElement(n,{className:"".concat(J,"-icon")})):null,w.exports.createElement("div",{className:"".concat(J,"-content")},p?w.exports.createElement("div",{className:"".concat(J,"-message")},p):null,a?w.exports.createElement("div",{className:"".concat(J,"-description")},a):null),N?w.exports.createElement("div",{className:"".concat(J,"-action")},N):null,B?w.exports.createElement("button",{type:"button",onClick:A,className:"".concat(J,"-close-icon"),tabIndex:0},k?w.exports.createElement("span",{className:"".concat(J,"-close-text")},k):w.exports.createElement(i,null)):null)}))};I.ErrorBoundary=P;var L=I;function q(e,t={}){const{params:n,onSuccess:a=(()=>{}),onFail:r=(()=>{})}=t,[o,s]=w.exports.useState(!1),[c,l]=w.exports.useState(),[i,u]=w.exports.useState(),m=w.exports.useRef(!1);return{loading:o,data:c,response:i,run:()=>{s(!0),e(n).then((e=>{m.current||(e.data&&l(e.data),u(e),a())})).catch((e=>{r(e)})).finally((()=>{s(!1)}))},cancel:()=>{m.current=!0,s(!1)}}}function R(){return k.get("/xxx/404")}function F(){return k.get("/article/detail?id=xxx")}function H(){return k.get("/article/detail?id=18c115d8-37df-4422-88c5-6b031eb19109")}function J(){return new Promise((e=>{setTimeout((()=>{e({code:0,data:{name:"Jone",age:33,www:!1},message:"success"})}),5e3)}))}var A="Page3_3MAurb",B="buttonGroup_1GXQQP";const{Panel:G}=N;function Q(){const{run:e}=q(R,{onFail:()=>{g.error("自定义请求失败消息: http error")}}),{run:t}=q(F,{onSuccess:()=>{g.success("请求0成功")},onFail:()=>{g.error("自定义请求失败消息: business error")}}),{loading:n,data:a,run:r}=q(H,{onSuccess:()=>{g.success("请求1成功")}}),{loading:o,data:s,run:c,cancel:l}=q(J,{onSuccess:()=>{g.success("请求2成功")}}),i=[{title:"request、useRequest 测试",children:O.createElement("div",null,O.createElement(L,{message:O.createElement("div",null,"测试前，需要启动一个后端服务。",O.createElement("a",{href:"https://github.com/percy507/koa2-template",target:"_blank",rel:"noreferrer"},"参考这里")),type:"warning",showIcon:!0}),O.createElement("div",{className:B},O.createElement(h,{onClick:()=>e()},"HTTP异常"),O.createElement(h,{onClick:()=>t()},"业务异常"),O.createElement(S,{placement:"bottom",title:O.createElement("pre",null,a?JSON.stringify(a,null,4):"暂无数据")},O.createElement(h,{loading:n,onClick:()=>r()},"测试响应成功1")),O.createElement(S,{placement:"bottom",title:O.createElement("pre",null,a?JSON.stringify(s,null,4):"暂无数据")},O.createElement(h,{loading:o,onClick:()=>c()},"测试响应成功2")),O.createElement(h,{onClick:()=>l()},"取消请求(测试响应成功2)")))}];return O.createElement(y,{className:A},O.createElement(C,{title:"各种测试集合"},O.createElement(N,{accordion:!0},i.map((e=>O.createElement(G,{header:e.title,key:e.title},e.children))))))}export{Q as default};
