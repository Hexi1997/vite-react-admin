var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,o=(t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,l=(e,t)=>{for(var r in t||(t={}))a.call(t,r)&&o(e,r,t[r]);if(n)for(var r of n(t))s.call(t,r)&&o(e,r,t[r]);return e},c=(e,n)=>t(e,r(n)),i=(e,t,r)=>(o(e,"symbol"!=typeof t?t+"":t,r),r);export function __vite_legacy_guard(){import("data:text/javascript,")}/* empty css                      */import{r as m,R as d,L as u,S as p,i as h,j as f,u as E,k as y,H as g,b as v}from"./vendor.007a0d56.js";import{A as x,_ as b,a as _,w as k,u as w,I as N,c as S,b as j,s as C,B as O,M as I,S as P,n as T,m as B,L,D as M,F as A,d as $}from"./antd.8efb228f.js";import{R,a as z,b as D,c as F,d as U}from"./recoil.e34f1d37.js";import{l as K}from"./qs.2e7c19d0.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var V={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"},H=function(e,t){return m.exports.createElement(x,b(b({},e),{},{ref:t,icon:V}))};H.displayName="WarningOutlined";var J=m.exports.forwardRef(H),q=["className","component","viewBox","spin","rotate","tabIndex","onClick","children"],G=m.exports.forwardRef((function(e,t){var r=e.className,n=e.component,a=e.viewBox,s=e.spin,o=e.rotate,l=e.tabIndex,c=e.onClick,i=e.children,d=_(e,q);k(Boolean(n||i),"Should have `component` prop or `children`."),w();var u=m.exports.useContext(N).prefixCls,p=void 0===u?"anticon":u,h=S(p,r),f=S(j({},"".concat(p,"-spin"),!!s)),E=o?{msTransform:"rotate(".concat(o,"deg)"),transform:"rotate(".concat(o,"deg)")}:void 0,y=b(b({},C),{},{className:f,style:E,viewBox:a});a||delete y.viewBox;var g=l;return void 0===g&&c&&(g=-1),m.exports.createElement("span",b(b({role:"img"},d),{},{ref:t,tabIndex:g,onClick:c,className:h}),n?m.exports.createElement(n,b({},y),i):i?(k(Boolean(a)||1===m.exports.Children.count(i)&&m.exports.isValidElement(i)&&"use"===m.exports.Children.only(i).type,"Make sure that you provide correct `viewBox` prop (default `0 0 1024 1024`) to the icon."),m.exports.createElement("svg",b(b({},y),{},{viewBox:a}),i)):null)}));G.displayName="AntdIcon";var Q=G,W=["type","children"],X=new Set;function Y(e){return Boolean("string"==typeof e&&e.length&&!X.has(e))}function Z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=e[t];if(Y(r)){var n=document.createElement("script");n.setAttribute("src",r),n.setAttribute("data-namespace",r),e.length>t+1&&(n.onload=function(){Z(e,t+1)},n.onerror=function(){Z(e,t+1)}),X.add(r),document.body.appendChild(n)}}var ee="errorBoundary_3AFZg6",te="errorIcon_ibixCb";class re extends d.PureComponent{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){console.log(e,t)}render(){return this.state.hasError?d.createElement("div",{className:ee},d.createElement(J,{className:te}),d.createElement("div",null,"加载出错,请刷新页面")):this.props.children}}var ne={403:{img:"./assets/403.62d6c08d.svg",title:"403",desc:"抱歉，你无权访问该页面"},404:{img:"./assets/404.f60a3ed3.svg",title:"404",desc:"抱歉，你访问的页面不存在"},500:{img:"./assets/500.cc43d5a3.svg",title:"500",desc:"抱歉，服务器出错了"}};var ae="exception_1XGYBB",se="imgBlock_2xLrUK",oe="imgEle_32oimp",le="content_3VQX0h",ce="desc_3aYJX3",ie="actions_VQxyLy";function me(e){const{type:t}=e,r=ne[t in ne?t:"404"];return d.createElement("div",{className:ae},d.createElement("div",{className:se},d.createElement("div",{className:oe,style:{backgroundImage:`url(${r.img})`}})),d.createElement("div",{className:le},d.createElement("h1",null,r.title),d.createElement("div",{className:ce},r.desc),d.createElement("div",{className:ie},d.createElement(u,{to:"/"},d.createElement(O,{type:"primary"},"返回首页")))))}const de=R({key:"userInfo",default:{}}),ue=z({key:"userPermissions",get:({get:e})=>e(de).permissions||[]});function pe(e){const{authcode:t="",fallback:r=null,children:n}=e,a=D(ue),s=""===t||a.includes(t);return d.createElement(d.Fragment,null,s?n:r)}const he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.scriptUrl,r=e.extraCommonProps,n=void 0===r?{}:r;t&&"undefined"!=typeof document&&"undefined"!=typeof window&&"function"==typeof document.createElement&&(Array.isArray(t)?Z(t.reverse()):Z([t]));var a=m.exports.forwardRef((function(e,t){var r=e.type,a=e.children,s=_(e,W),o=null;return e.type&&(o=m.exports.createElement("use",{xlinkHref:"#".concat(r)})),a&&(o=a),m.exports.createElement(Q,b(b(b({},n),s),{},{ref:t}),o)}));return a.displayName="Iconfont",a}({scriptUrl:"//at.alicdn.com/t/font_2727509_fa5jm8jxp8v.js"});function fe(e){return d.createElement(he,{type:e.type})}var Ee="menuList_3k7Dl2";const ye=I.Item,{SubMenu:ge}=I;function ve(e){const t=e,{list:r,openKeys:o=[],selectedKeys:i=[]}=t,p=((e,t)=>{var r={};for(var o in e)a.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&n)for(var o of n(e))t.indexOf(o)<0&&s.call(e,o)&&(r[o]=e[o]);return r})(t,["list","openKeys","selectedKeys"]),h=function(){const e=D(ue);return(t="")=>e.includes(t)}(),[f,E]=m.exports.useState(o),[y,g]=m.exports.useState(i);return m.exports.useEffect((()=>{o.join(",")===f.join(",")&&i.join(",")===y.join(",")||(E(o),g(i))}),[o,i]),d.createElement(I,c(l({},p),{className:Ee,openKeys:f,selectedKeys:y,onOpenChange:e=>{E(e)},onSelect:({selectedKeys:e})=>{g(e)}}),r.filter((e=>h(e.authcode))).map((e=>{const t=e.children||[];return 0===t.length?d.createElement(ye,{key:e.key},d.createElement(u,{title:e.label,to:e.link},e.icon&&d.createElement(fe,{type:e.icon}),d.createElement("span",null,e.label))):d.createElement(ge,{key:e.key,title:d.createElement("span",null,e.icon&&d.createElement(fe,{type:e.icon}),d.createElement("span",null,e.label))},t.filter((e=>h(e.authcode))).map((e=>d.createElement(ye,{key:e.key},d.createElement(u,{to:e.link},e.label)))))})))}function xe(e){const{list:t}=e,r=m.exports.useMemo((()=>d.createElement("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"}},d.createElement(P,{spinning:!0}))),[]);return d.createElement(m.exports.Suspense,{fallback:r},d.createElement(p,null,t.map(((e,t)=>{if(void 0!==e.redirect)return d.createElement(h,{key:t,to:e.redirect});{const r=e.component;return d.createElement(f,{key:t,path:e.path,exact:e.exact,render:t=>d.createElement(pe,{authcode:e.authcode,fallback:d.createElement(me,{type:403})},d.createElement(r,l({},t)))})}}))))}var be={BASE_API:"https://xxx.dev.com/api"};const _e={200:"服务器成功返回请求的数据。",201:"新建或修改数据成功。",202:"一个请求已经进入后台排队（异步任务）。",204:"删除数据成功。",400:"发出的请求有错误，服务器没有进行新建或修改数据的操作。",401:"用户没有权限（令牌、用户名、密码错误）。",403:"用户得到授权，但是访问是被禁止的。",404:"发出的请求针对的是不存在的记录，服务器没有进行操作。",406:"请求的格式不可得。",410:"请求的资源被永久删除，且不会再得到的。",422:"当创建一个对象时，发生一个验证错误。",500:"服务器发生错误，请检查服务器。",502:"网关错误。",503:"服务不可用，服务器暂时过载或维护。",504:"网关超时。"};var ke=new class{constructor(){i(this,"serverUrl",be.BASE_API),i(this,"fetch",((e,t={})=>{const r=e.match(/^(http)|(\/\/)/)?e:`${this.serverUrl}${e}`,n=[window.fetch(r,c(l({},t),{headers:l({},t.headers?t.headers:{})})),new Promise(((e,t)=>{setTimeout((()=>t(new Error("请求超时"))),6e4)}))];return Promise.race(n).then((e=>e)).then(this.checkHttpStatus).then(this.parseResponseResult).then((e=>{if("object"==typeof e&&void 0!==e.code&&!this.checkBusinessCode(e))throw new Error(`请求异常: ${e.code}-${e.message}\n${r}`);return e})).catch((e=>Promise.reject(e&&`${e.toString()} : ${r}`)))})),i(this,"toLogin",(()=>{window.location.href=`/login?from_page=${encodeURIComponent(location.href)}`})),i(this,"checkHttpStatus",(e=>{const t=e.status;if(t>=200&&t<300)return e;const r=_e[e.status]||e.statusText,n=new Error(r);throw n.name=`${e.status}`,n.response=e,T.error({message:`请求错误 ${e.status}: ${e.url}`,description:r}),n})),i(this,"parseResponseResult",(e=>{const t=e.headers.get("Content-Type");return t&&t.indexOf("json")>-1?e.json():t&&t.indexOf("octet-stream")>-1||t&&t.indexOf("image")>-1?e.blob():e.text()})),i(this,"checkBusinessCode",(e=>{const t=e.status,r=e.message;if(200===t)return!0;if(9009===t||9010===t||9011===t)this.toLogin();else if(9040===t)return B.error(r),!0;return B.error(r),!1})),i(this,"get",(e=>this.fetch(e,{method:"GET"}))),i(this,"post",((e,t)=>this.fetch(e,{headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},method:"POST",body:K.stringify(t)}))),i(this,"postJson",((e,t)=>this.fetch(e,{headers:{"Content-Type":"application/json;charset=UTF-8"},method:"POST",body:JSON.stringify(t)}))),i(this,"postFormData",((e,t)=>{const r=new FormData;return Object.keys(t).forEach((e=>{r.append(e,t[e])})),this.fetch(e,{method:"POST",body:r})})),i(this,"putJson",((e,t)=>this.fetch(e,{headers:{"Content-Type":"application/json;charset=UTF-8"},method:"PUT",body:JSON.stringify(t)}))),i(this,"delete",(e=>this.fetch(e,{method:"DELETE"})))}};const we={},Ne=function(e,t){return t&&0!==t.length?Promise.all(t.map((e=>{if((e=`./${e}`)in we)return;we[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":"modulepreload",t||(n.as="script",n.crossOrigin=""),n.href=e,document.head.appendChild(n),t?new Promise(((e,t)=>{n.addEventListener("load",e),n.addEventListener("error",t)})):void 0}))).then((()=>e())):e()},Se=m.exports.lazy((()=>Ne((()=>import("./index.efac2b8d.js")),["assets/index.efac2b8d.js","assets/index.6a31b9b5.css","assets/normalize.css.a00f81cc.css","assets/vendor.007a0d56.js","assets/antd.8efb228f.js","assets/recoil.e34f1d37.js","assets/qs.2e7c19d0.js"]))),je=m.exports.lazy((()=>Ne((()=>import("./index.9a874f1b.js")),["assets/index.9a874f1b.js","assets/index.94af7c4f.css","assets/vendor.007a0d56.js"]))),Ce=[{key:"l1",label:"主菜单111",link:"/l1/testMenu1/testMenu1_1/list",authcode:"l1"},{key:"l2",label:"主菜单222",link:"/l2/xxx/list",authcode:"l2"}],Oe=[{path:"/l1",component:Se,authcode:"l1"},{path:"/l2",component:je,authcode:"l2"},{redirect:"/l1"}];var Ie="basicLayout_32MWTf",Pe="loading_GxzoNE",Te="header_398AOr",Be="header__left_3_uNZz",Le="logo_3ViiOH",Me="header__right_l9ydQR",Ae="userName_1xbuLd",$e="content_bAY9U9";const{Header:Re}=L;function ze(){const e=E(),t=y(),[r,n]=m.exports.useState(!0),[a,s]=m.exports.useState([]),[o,l]=F(de),c=m.exports.useCallback((()=>{localStorage.clear(),e.push("/login")}),[e]),i=m.exports.useMemo((()=>d.createElement(I,null,d.createElement(I.Item,null,"个人中心"),d.createElement(I.Divider,null),d.createElement(I.Item,{onClick:c},"退出登录"))),[c]),u=m.exports.useCallback((()=>{(ke.get("/userInfo"),new Promise((e=>{setTimeout((()=>{e({name:"莉莉丝",permissions:["l1","l2","l1_testMenu1","l1_testMenu1_1","l1_testMenu1_2","l1_testMenu3"]})}),2e3)}))).then((e=>{l(e)})).finally((()=>{n(!1)}))}),[l]);return m.exports.useEffect((()=>u()),[]),m.exports.useEffect((()=>{s([t.pathname.split("/")[1]])}),[t]),d.createElement(L,{className:Ie},r?d.createElement(P,{className:Pe,spinning:!0,size:"large",tip:"加载中..."}):d.createElement(m.exports.Fragment,null,d.createElement(Re,{className:Te},d.createElement("div",{className:Be},d.createElement("div",{className:Le},d.createElement("img",{src:"./assets/logo.32a70972.svg",alt:"logo"}),d.createElement("div",null,"xx管理系统")),d.createElement(ve,{theme:"dark",mode:"horizontal",selectedKeys:a,list:Ce})),d.createElement("div",{className:Me},d.createElement(M,{overlay:i},d.createElement("div",{className:Ae},o.name)))),d.createElement(L,{className:$e},d.createElement(xe,{list:Oe}))))}var De="loginPage_3Msf_l",Fe="container_4uEVJ3";function Ue(){const e=E(),[t,r]=m.exports.useState(!1);return d.createElement("div",{className:De},d.createElement("div",{className:Fe},d.createElement("h2",{style:{textAlign:"center"}},"xx管理系统"),d.createElement("br",null),d.createElement(A,{name:"basic",labelCol:{span:6},wrapperCol:{span:16},initialValues:{},onFinish:t=>{console.log("Login Success:",t),r(!0),new Promise((e=>{setTimeout((()=>{e(`token____${Math.random()}`)}),1500)})).then((t=>{!function(e){localStorage.setItem("auth_token",e)}(t),e.push("/")})).finally((()=>r(!1)))}},d.createElement(A.Item,{label:"账号",name:"username",rules:[{required:!0,message:"请输入账号"}]},d.createElement($,{placeholder:"admin"})),d.createElement(A.Item,{label:"密码",name:"password",rules:[{required:!0,message:"请输入密码"}]},d.createElement($.Password,{placeholder:"123456"})),d.createElement(A.Item,{wrapperCol:{offset:8,span:16}},d.createElement(O,{type:"primary",htmlType:"submit",loading:t},"登录")))))}function Ke(){const e=!!localStorage.getItem("auth_token");return m.exports.useEffect((()=>{}),[]),d.createElement(U,null,d.createElement(g,null,d.createElement(p,null,d.createElement(f,{path:"/login",exact:!0,component:Ue}),d.createElement(f,{render:({location:t})=>e?d.createElement(f,{location:t,component:ze}):d.createElement(h,{to:"/login"})}),d.createElement(f,{render:()=>d.createElement(me,{type:404})}))))}v.render(d.createElement(d.StrictMode,null,d.createElement(re,null,d.createElement(Ke,null))),document.getElementById("root"));export{me as E,ve as M,xe as R,Ne as _,ke as r};
