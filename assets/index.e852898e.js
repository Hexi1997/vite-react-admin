var e=Object.defineProperty,t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,o=(t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,i=(e,i)=>{for(var s in i||(i={}))r.call(i,s)&&o(e,s,i[s]);if(t)for(var s of t(i))n.call(i,s)&&o(e,s,i[s]);return e};import"./index.5ecc34b2.js";import{P as s}from"./index.4c6a01ec.js";import{r as a}from"./request.bf4d7ac6.js";import{r as l,R as u}from"./vendor.a5ae8b09.js";import{l as c}from"./highlight.js.5be9a004.js";import{k as p}from"./katex.d0ceedce.js";import{Q as f}from"./quill.d870918a.js";import{s as h,c as g,a as m}from"./qs.2ee0d5a2.js";import{S as b,m as d,U as y,e as v,B as x,C as j,f as w}from"./antd.ff053a27.js";import{c as k}from"./classnames.ca41f454.js";import{C as O}from"./cropperjs.79fa6fb7.js";/* empty css                      */import"./recoil.3d42e3be.js";function E(e,t,r){if(e==t)return e?[[0,e]]:[];(r<0||e.length<r)&&(r=null);var n=A(e,t),o=e.substring(0,n);n=L(e=e.substring(n),t=t.substring(n));var i=e.substring(e.length-n),s=function(e,t){var r;if(!e)return[[1,t]];if(!t)return[[-1,e]];var n=e.length>t.length?e:t,o=e.length>t.length?t:e,i=n.indexOf(o);if(-1!=i)return r=[[1,n.substring(0,i)],[0,o],[1,n.substring(i+o.length)]],e.length>t.length&&(r[0][0]=r[2][0]=-1),r;if(1==o.length)return[[-1,e],[1,t]];var s=function(e,t){var r=e.length>t.length?e:t,n=e.length>t.length?t:e;if(r.length<4||2*n.length<r.length)return null;function o(e,t,r){for(var n,o,i,s,a=e.substring(r,r+Math.floor(e.length/4)),l=-1,u="";-1!=(l=t.indexOf(a,l+1));){var c=A(e.substring(r),t.substring(l)),p=L(e.substring(0,r),t.substring(0,l));u.length<p+c&&(u=t.substring(l-p,l)+t.substring(l,l+c),n=e.substring(0,r-p),o=e.substring(r+c),i=t.substring(0,l-p),s=t.substring(l+c))}return 2*u.length>=e.length?[n,o,i,s,u]:null}var i,s,a,l,u,c=o(r,n,Math.ceil(r.length/4)),p=o(r,n,Math.ceil(r.length/2));if(!c&&!p)return null;i=p?c&&c[4].length>p[4].length?c:p:c;e.length>t.length?(s=i[0],a=i[1],l=i[2],u=i[3]):(l=i[0],u=i[1],s=i[2],a=i[3]);var f=i[4];return[s,a,l,u,f]}(e,t);if(s){var a=s[0],l=s[1],u=s[2],c=s[3],p=s[4],f=E(a,u),h=E(l,c);return f.concat([[0,p]],h)}return function(e,t){for(var r=e.length,n=t.length,o=Math.ceil((r+n)/2),i=o,s=2*o,a=new Array(s),l=new Array(s),u=0;u<s;u++)a[u]=-1,l[u]=-1;a[i+1]=0,l[i+1]=0;for(var c=r-n,p=c%2!=0,f=0,h=0,g=0,m=0,b=0;b<o;b++){for(var d=-b+f;d<=b-h;d+=2){for(var y=i+d,v=(O=d==-b||d!=b&&a[y-1]<a[y+1]?a[y+1]:a[y-1]+1)-d;O<r&&v<n&&e.charAt(O)==t.charAt(v);)O++,v++;if(a[y]=O,O>r)h+=2;else if(v>n)f+=2;else if(p){if((w=i+c-d)>=0&&w<s&&-1!=l[w])if(O>=(j=r-l[w]))return S(e,t,O,v)}}for(var x=-b+g;x<=b-m;x+=2){for(var j,w=i+x,k=(j=x==-b||x!=b&&l[w-1]<l[w+1]?l[w+1]:l[w-1]+1)-x;j<r&&k<n&&e.charAt(r-j-1)==t.charAt(n-k-1);)j++,k++;if(l[w]=j,j>r)m+=2;else if(k>n)g+=2;else if(!p){if((y=i+c-x)>=0&&y<s&&-1!=a[y]){var O;v=i+(O=a[y])-y;if(O>=(j=r-j))return S(e,t,O,v)}}}}return[[-1,e],[1,t]]}(e,t)}(e=e.substring(0,e.length-n),t=t.substring(0,t.length-n));return o&&s.unshift([0,o]),i&&s.push([0,i]),C(s),null!=r&&(s=function(e,t){var r=function(e,t){if(0===t)return[0,e];for(var r=0,n=0;n<e.length;n++){var o=e[n];if(-1===o[0]||0===o[0]){var i=r+o[1].length;if(t===i)return[n+1,e];if(t<i){e=e.slice();var s=t-r,a=[o[0],o[1].slice(0,s)],l=[o[0],o[1].slice(s)];return e.splice(n,1,a,l),[n+1,e]}r=i}}throw new Error("cursor_pos is out of bounds!")}(e,t),n=r[1],o=r[0],i=n[o],s=n[o+1];if(null==i)return e;if(0!==i[0])return e;if(null!=s&&i[1]+s[1]===s[1]+i[1])return n.splice(o,2,s,i),T(n,o,2);if(null!=s&&0===s[1].indexOf(i[1])){n.splice(o,2,[s[0],i[1]],[0,i[1]]);var a=s[1].slice(i[1].length);return a.length>0&&n.splice(o+2,0,[s[0],a]),T(n,o,3)}return e}(s,r)),s=function(e){for(var t=!1,r=function(e){return e.charCodeAt(0)>=56320&&e.charCodeAt(0)<=57343},n=function(e){return e.charCodeAt(e.length-1)>=55296&&e.charCodeAt(e.length-1)<=56319},o=2;o<e.length;o+=1)0===e[o-2][0]&&n(e[o-2][1])&&-1===e[o-1][0]&&r(e[o-1][1])&&1===e[o][0]&&r(e[o][1])&&(t=!0,e[o-1][1]=e[o-2][1].slice(-1)+e[o-1][1],e[o][1]=e[o-2][1].slice(-1)+e[o][1],e[o-2][1]=e[o-2][1].slice(0,-1));if(!t)return e;var i=[];for(o=0;o<e.length;o+=1)e[o][1].length>0&&i.push(e[o]);return i}(s)}function S(e,t,r,n){var o=e.substring(0,r),i=t.substring(0,n),s=e.substring(r),a=t.substring(n),l=E(o,i),u=E(s,a);return l.concat(u)}function A(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var r=0,n=Math.min(e.length,t.length),o=n,i=0;r<o;)e.substring(i,o)==t.substring(i,o)?i=r=o:n=o,o=Math.floor((n-r)/2+r);return o}function L(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var r=0,n=Math.min(e.length,t.length),o=n,i=0;r<o;)e.substring(e.length-o,e.length-i)==t.substring(t.length-o,t.length-i)?i=r=o:n=o,o=Math.floor((n-r)/2+r);return o}function C(e){e.push([0,""]);for(var t,r=0,n=0,o=0,i="",s="";r<e.length;)switch(e[r][0]){case 1:o++,s+=e[r][1],r++;break;case-1:n++,i+=e[r][1],r++;break;case 0:n+o>1?(0!==n&&0!==o&&(0!==(t=A(s,i))&&(r-n-o>0&&0==e[r-n-o-1][0]?e[r-n-o-1][1]+=s.substring(0,t):(e.splice(0,0,[0,s.substring(0,t)]),r++),s=s.substring(t),i=i.substring(t)),0!==(t=L(s,i))&&(e[r][1]=s.substring(s.length-t)+e[r][1],s=s.substring(0,s.length-t),i=i.substring(0,i.length-t))),0===n?e.splice(r-o,n+o,[1,s]):0===o?e.splice(r-n,n+o,[-1,i]):e.splice(r-n-o,n+o,[-1,i],[1,s]),r=r-n-o+(n?1:0)+(o?1:0)+1):0!==r&&0==e[r-1][0]?(e[r-1][1]+=e[r][1],e.splice(r,1)):r++,o=0,n=0,i="",s=""}""===e[e.length-1][1]&&e.pop();var a=!1;for(r=1;r<e.length-1;)0==e[r-1][0]&&0==e[r+1][0]&&(e[r][1].substring(e[r][1].length-e[r-1][1].length)==e[r-1][1]?(e[r][1]=e[r-1][1]+e[r][1].substring(0,e[r][1].length-e[r-1][1].length),e[r+1][1]=e[r-1][1]+e[r+1][1],e.splice(r-1,1),a=!0):e[r][1].substring(0,e[r+1][1].length)==e[r+1][1]&&(e[r-1][1]+=e[r+1][1],e[r][1]=e[r][1].substring(e[r+1][1].length)+e[r+1][1],e.splice(r+1,1),a=!0)),r++;a&&C(e)}var P=E;P.INSERT=1,P.DELETE=-1,P.EQUAL=0;var $=P;function T(e,t,r){for(var n=t+r-1;n>=0&&n>=t-1;n--)if(n+1<e.length){var o=e[n],i=e[n+1];o[0]===i[1]&&e.splice(n,2,[o[0],o[1]+i[1]])}return e}var M,R=Object.prototype.toString,_=function(e){var t=R.call(e),r="[object Arguments]"===t;return r||(r="[object Array]"!==t&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===R.call(e.callee)),r};if(!Object.keys){var N=Object.prototype.hasOwnProperty,I=Object.prototype.toString,q=_,D=Object.prototype.propertyIsEnumerable,z=!D.call({toString:null},"toString"),U=D.call((function(){}),"prototype"),H=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],B=function(e){var t=e.constructor;return t&&t.prototype===e},F={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},Q=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!F["$"+e]&&N.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{B(window[e])}catch(t){return!0}}catch(t){return!0}return!1}();M=function(e){var t=null!==e&&"object"==typeof e,r="[object Function]"===I.call(e),n=q(e),o=t&&"[object String]"===I.call(e),i=[];if(!t&&!r&&!n)throw new TypeError("Object.keys called on a non-object");var s=U&&r;if(o&&e.length>0&&!N.call(e,0))for(var a=0;a<e.length;++a)i.push(String(a));if(n&&e.length>0)for(var l=0;l<e.length;++l)i.push(String(l));else for(var u in e)s&&"prototype"===u||!N.call(e,u)||i.push(String(u));if(z)for(var c=function(e){if("undefined"==typeof window||!Q)return B(e);try{return B(e)}catch(t){return!1}}(e),p=0;p<H.length;++p)c&&"constructor"===H[p]||!N.call(e,H[p])||i.push(H[p]);return i}}var W=M,V=Array.prototype.slice,X=_,Y=Object.keys,G=Y?function(e){return Y(e)}:W,J=Object.keys;G.shim=function(){Object.keys?function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2)||(Object.keys=function(e){return X(e)?J(V.call(e)):J(e)}):Object.keys=G;return Object.keys||G};var K=G,Z=h,ee=function(){return Z()&&!!Symbol.toStringTag},te=ee(),re=g("Object.prototype.toString"),ne=function(e){return!(te&&e&&"object"==typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===re(e)},oe=function(e){return!!ne(e)||null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==re(e)&&"[object Function]"===re(e.callee)},ie=function(){return ne(arguments)}();ne.isLegacyArguments=oe;var se=ie?ne:oe,ae=K,le="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),ue=Object.prototype.toString,ce=Array.prototype.concat,pe=Object.defineProperty,fe=pe&&function(){var e={};try{for(var t in pe(e,"x",{enumerable:!1,value:e}),e)return!1;return e.x===e}catch(r){return!1}}(),he=function(e,t,r,n){var o;(!(t in e)||"function"==typeof(o=n)&&"[object Function]"===ue.call(o)&&n())&&(fe?pe(e,t,{configurable:!0,enumerable:!1,value:r,writable:!0}):e[t]=r)},ge=function(e,t){var r=arguments.length>2?arguments[2]:{},n=ae(t);le&&(n=ce.call(n,Object.getOwnPropertySymbols(t)));for(var o=0;o<n.length;o+=1)he(e,n[o],t[n[o]],r[n[o]])};ge.supportsDescriptors=!!fe;var me=ge,be=function(e){return e!=e},de=function(e,t){return 0===e&&0===t?1/e==1/t:e===t||!(!be(e)||!be(t))},ye=de,ve=function(){return"function"==typeof Object.is?Object.is:ye},xe=ve,je=me,we=me,ke=de,Oe=ve,Ee=function(){var e=xe();return je(Object,{is:e},{is:function(){return Object.is!==e}}),e},Se=(0,m.exports)(Oe(),Object);we(Se,{getPolyfill:Oe,implementation:ke,shim:Ee});var Ae,Le,Ce,Pe,$e=Se,Te=g,Me=ee();if(Me){Ae=Te("Object.prototype.hasOwnProperty"),Le=Te("RegExp.prototype.exec"),Ce={};var Re=function(){throw Ce};Pe={toString:Re,valueOf:Re},"symbol"==typeof Symbol.toPrimitive&&(Pe[Symbol.toPrimitive]=Re)}var _e=Te("Object.prototype.toString"),Ne=Object.getOwnPropertyDescriptor,Ie=Me?function(e){if(!e||"object"!=typeof e)return!1;var t=Ne(e,"lastIndex");if(!(t&&Ae(t,"value")))return!1;try{Le(e,Pe)}catch(r){return r===Ce}}:function(e){return!(!e||"object"!=typeof e&&"function"!=typeof e)&&"[object RegExp]"===_e(e)},qe=Object,De=TypeError,ze=function(){if(null!=this&&this!==qe(this))throw new De("RegExp.prototype.flags getter called on non-object");var e="";return this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),this.dotAll&&(e+="s"),this.unicode&&(e+="u"),this.sticky&&(e+="y"),e},Ue=ze,He=me.supportsDescriptors,Be=Object.getOwnPropertyDescriptor,Fe=TypeError,Qe=function(){if(!He)throw new Fe("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");if("gim"===/a/gim.flags){var e=Be(RegExp.prototype,"flags");if(e&&"function"==typeof e.get&&"boolean"==typeof/a/.dotAll)return e.get}return Ue},We=me.supportsDescriptors,Ve=Qe,Xe=Object.getOwnPropertyDescriptor,Ye=Object.defineProperty,Ge=TypeError,Je=Object.getPrototypeOf,Ke=/a/,Ze=me,et=ze,tt=Qe,rt=function(){if(!We||!Je)throw new Ge("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var e=Ve(),t=Je(Ke),r=Xe(t,"flags");return r&&r.get===e||Ye(t,"flags",{configurable:!0,enumerable:!1,get:e}),e},nt=(0,m.exports)(et);Ze(nt,{getPolyfill:tt,implementation:et,shim:rt});var ot=nt,it=Date.prototype.getDay,st=Object.prototype.toString,at=ee(),lt=K,ut=se,ct=$e,pt=Ie,ft=ot,ht=function(e){return"object"==typeof e&&null!==e&&(at?function(e){try{return it.call(e),!0}catch(t){return!1}}(e):"[object Date]"===st.call(e))},gt=Date.prototype.getTime;function mt(e,t,r){var n=r||{};return!!(n.strict?ct(e,t):e===t)||(!e||!t||"object"!=typeof e&&"object"!=typeof t?n.strict?ct(e,t):e==t:function(e,t,r){var n,o;if(typeof e!=typeof t)return!1;if(bt(e)||bt(t))return!1;if(e.prototype!==t.prototype)return!1;if(ut(e)!==ut(t))return!1;var i=pt(e),s=pt(t);if(i!==s)return!1;if(i||s)return e.source===t.source&&ft(e)===ft(t);if(ht(e)&&ht(t))return gt.call(e)===gt.call(t);var a=dt(e),l=dt(t);if(a!==l)return!1;if(a||l){if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}if(typeof e!=typeof t)return!1;try{var u=lt(e),c=lt(t)}catch(p){return!1}if(u.length!==c.length)return!1;for(u.sort(),c.sort(),n=u.length-1;n>=0;n--)if(u[n]!=c[n])return!1;for(n=u.length-1;n>=0;n--)if(!mt(e[o=u[n]],t[o],r))return!1;return!0}(e,t,n))}function bt(e){return null==e}function dt(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length)&&("function"==typeof e.copy&&"function"==typeof e.slice&&!(e.length>0&&"number"!=typeof e[0]))}var yt=mt,vt=Object.prototype.hasOwnProperty,xt=Object.prototype.toString,jt=Object.defineProperty,wt=Object.getOwnPropertyDescriptor,kt=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===xt.call(e)},Ot=function(e){if(!e||"[object Object]"!==xt.call(e))return!1;var t,r=vt.call(e,"constructor"),n=e.constructor&&e.constructor.prototype&&vt.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!r&&!n)return!1;for(t in e);return void 0===t||vt.call(e,t)},Et=function(e,t){jt&&"__proto__"===t.name?jt(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},St=function(e,t){if("__proto__"===t){if(!vt.call(e,t))return;if(wt)return wt(e,t).value}return e[t]},At=function e(){var t,r,n,o,i,s,a=arguments[0],l=1,u=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[1]||{},l=2),(null==a||"object"!=typeof a&&"function"!=typeof a)&&(a={});l<u;++l)if(null!=(t=arguments[l]))for(r in t)n=St(a,r),a!==(o=St(t,r))&&(c&&o&&(Ot(o)||(i=kt(o)))?(i?(i=!1,s=n&&kt(n)?n:[]):s=n&&Ot(n)?n:{},Et(a,{name:r,newValue:e(c,s,o)})):void 0!==o&&Et(a,{name:r,newValue:o}));return a},Lt=yt,Ct=At,Pt={attributes:{compose:function(e,t,r){"object"!=typeof e&&(e={}),"object"!=typeof t&&(t={});var n=Ct(!0,{},t);for(var o in r||(n=Object.keys(n).reduce((function(e,t){return null!=n[t]&&(e[t]=n[t]),e}),{})),e)void 0!==e[o]&&void 0===t[o]&&(n[o]=e[o]);return Object.keys(n).length>0?n:void 0},diff:function(e,t){"object"!=typeof e&&(e={}),"object"!=typeof t&&(t={});var r=Object.keys(e).concat(Object.keys(t)).reduce((function(r,n){return Lt(e[n],t[n])||(r[n]=void 0===t[n]?null:t[n]),r}),{});return Object.keys(r).length>0?r:void 0},transform:function(e,t,r){if("object"!=typeof e)return t;if("object"==typeof t){if(!r)return t;var n=Object.keys(t).reduce((function(r,n){return void 0===e[n]&&(r[n]=t[n]),r}),{});return Object.keys(n).length>0?n:void 0}}},iterator:function(e){return new $t(e)},length:function(e){return"number"==typeof e.delete?e.delete:"number"==typeof e.retain?e.retain:"string"==typeof e.insert?e.insert.length:1}};function $t(e){this.ops=e,this.index=0,this.offset=0}$t.prototype.hasNext=function(){return this.peekLength()<1/0},$t.prototype.next=function(e){e||(e=1/0);var t=this.ops[this.index];if(t){var r=this.offset,n=Pt.length(t);if(e>=n-r?(e=n-r,this.index+=1,this.offset=0):this.offset+=e,"number"==typeof t.delete)return{delete:e};var o={};return t.attributes&&(o.attributes=t.attributes),"number"==typeof t.retain?o.retain=e:"string"==typeof t.insert?o.insert=t.insert.substr(r,e):o.insert=t.insert,o}return{retain:1/0}},$t.prototype.peek=function(){return this.ops[this.index]},$t.prototype.peekLength=function(){return this.ops[this.index]?Pt.length(this.ops[this.index])-this.offset:1/0},$t.prototype.peekType=function(){return this.ops[this.index]?"number"==typeof this.ops[this.index].delete?"delete":"number"==typeof this.ops[this.index].retain?"retain":"insert":"retain"},$t.prototype.rest=function(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);var e=this.offset,t=this.index,r=this.next(),n=this.ops.slice(this.index);return this.offset=e,this.index=t,[r].concat(n)}return[]};var Tt=$,Mt=yt,Rt=At,_t=Pt,Nt=String.fromCharCode(0),It=function(e){Array.isArray(e)?this.ops=e:null!=e&&Array.isArray(e.ops)?this.ops=e.ops:this.ops=[]};It.prototype.insert=function(e,t){var r={};return 0===e.length?this:(r.insert=e,null!=t&&"object"==typeof t&&Object.keys(t).length>0&&(r.attributes=t),this.push(r))},It.prototype.delete=function(e){return e<=0?this:this.push({delete:e})},It.prototype.retain=function(e,t){if(e<=0)return this;var r={retain:e};return null!=t&&"object"==typeof t&&Object.keys(t).length>0&&(r.attributes=t),this.push(r)},It.prototype.push=function(e){var t=this.ops.length,r=this.ops[t-1];if(e=Rt(!0,{},e),"object"==typeof r){if("number"==typeof e.delete&&"number"==typeof r.delete)return this.ops[t-1]={delete:r.delete+e.delete},this;if("number"==typeof r.delete&&null!=e.insert&&(t-=1,"object"!=typeof(r=this.ops[t-1])))return this.ops.unshift(e),this;if(Mt(e.attributes,r.attributes)){if("string"==typeof e.insert&&"string"==typeof r.insert)return this.ops[t-1]={insert:r.insert+e.insert},"object"==typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this;if("number"==typeof e.retain&&"number"==typeof r.retain)return this.ops[t-1]={retain:r.retain+e.retain},"object"==typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this}}return t===this.ops.length?this.ops.push(e):this.ops.splice(t,0,e),this},It.prototype.chop=function(){var e=this.ops[this.ops.length-1];return e&&e.retain&&!e.attributes&&this.ops.pop(),this},It.prototype.filter=function(e){return this.ops.filter(e)},It.prototype.forEach=function(e){this.ops.forEach(e)},It.prototype.map=function(e){return this.ops.map(e)},It.prototype.partition=function(e){var t=[],r=[];return this.forEach((function(n){(e(n)?t:r).push(n)})),[t,r]},It.prototype.reduce=function(e,t){return this.ops.reduce(e,t)},It.prototype.changeLength=function(){return this.reduce((function(e,t){return t.insert?e+_t.length(t):t.delete?e-t.delete:e}),0)},It.prototype.length=function(){return this.reduce((function(e,t){return e+_t.length(t)}),0)},It.prototype.slice=function(e,t){e=e||0,"number"!=typeof t&&(t=1/0);for(var r=[],n=_t.iterator(this.ops),o=0;o<t&&n.hasNext();){var i;o<e?i=n.next(e-o):(i=n.next(t-o),r.push(i)),o+=_t.length(i)}return new It(r)},It.prototype.compose=function(e){var t=_t.iterator(this.ops),r=_t.iterator(e.ops),n=[],o=r.peek();if(null!=o&&"number"==typeof o.retain&&null==o.attributes){for(var i=o.retain;"insert"===t.peekType()&&t.peekLength()<=i;)i-=t.peekLength(),n.push(t.next());o.retain-i>0&&r.next(o.retain-i)}for(var s=new It(n);t.hasNext()||r.hasNext();)if("insert"===r.peekType())s.push(r.next());else if("delete"===t.peekType())s.push(t.next());else{var a=Math.min(t.peekLength(),r.peekLength()),l=t.next(a),u=r.next(a);if("number"==typeof u.retain){var c={};"number"==typeof l.retain?c.retain=a:c.insert=l.insert;var p=_t.attributes.compose(l.attributes,u.attributes,"number"==typeof l.retain);if(p&&(c.attributes=p),s.push(c),!r.hasNext()&&Mt(s.ops[s.ops.length-1],c)){var f=new It(t.rest());return s.concat(f).chop()}}else"number"==typeof u.delete&&"number"==typeof l.retain&&s.push(u)}return s.chop()},It.prototype.concat=function(e){var t=new It(this.ops.slice());return e.ops.length>0&&(t.push(e.ops[0]),t.ops=t.ops.concat(e.ops.slice(1))),t},It.prototype.diff=function(e,t){if(this.ops===e.ops)return new It;var r=[this,e].map((function(t){return t.map((function(r){if(null!=r.insert)return"string"==typeof r.insert?r.insert:Nt;throw new Error("diff() called "+(t===e?"on":"with")+" non-document")})).join("")})),n=new It,o=Tt(r[0],r[1],t),i=_t.iterator(this.ops),s=_t.iterator(e.ops);return o.forEach((function(e){for(var t=e[1].length;t>0;){var r=0;switch(e[0]){case Tt.INSERT:r=Math.min(s.peekLength(),t),n.push(s.next(r));break;case Tt.DELETE:r=Math.min(t,i.peekLength()),i.next(r),n.delete(r);break;case Tt.EQUAL:r=Math.min(i.peekLength(),s.peekLength(),t);var o=i.next(r),a=s.next(r);Mt(o.insert,a.insert)?n.retain(r,_t.attributes.diff(o.attributes,a.attributes)):n.push(a).delete(r)}t-=r}})),n.chop()},It.prototype.eachLine=function(e,t){t=t||"\n";for(var r=_t.iterator(this.ops),n=new It,o=0;r.hasNext();){if("insert"!==r.peekType())return;var i=r.peek(),s=_t.length(i)-r.peekLength(),a="string"==typeof i.insert?i.insert.indexOf(t,s)-s:-1;if(a<0)n.push(r.next());else if(a>0)n.push(r.next(a));else{if(!1===e(n,r.next(1).attributes||{},o))return;o+=1,n=new It}}n.length()>0&&e(n,{},o)},It.prototype.transform=function(e,t){if(t=!!t,"number"==typeof e)return this.transformPosition(e,t);for(var r=_t.iterator(this.ops),n=_t.iterator(e.ops),o=new It;r.hasNext()||n.hasNext();)if("insert"!==r.peekType()||!t&&"insert"===n.peekType())if("insert"===n.peekType())o.push(n.next());else{var i=Math.min(r.peekLength(),n.peekLength()),s=r.next(i),a=n.next(i);if(s.delete)continue;a.delete?o.push(a):o.retain(i,_t.attributes.transform(s.attributes,a.attributes,t))}else o.retain(_t.length(r.next()));return o.chop()},It.prototype.transformPosition=function(e,t){t=!!t;for(var r=_t.iterator(this.ops),n=0;r.hasNext()&&n<=e;){var o=r.peekLength(),i=r.peekType();r.next(),"delete"!==i?("insert"===i&&(n<e||!t)&&(e+=o),n+=o):e-=Math.min(o,e-n)}return e};var qt=It;function Dt(e){return a.postFormData("https://api.imgbb.com/1/upload",e)}var zt="quillEditor_zlLIyM",Ut="editorContent_HRAz-E";c.configure({languages:["javascript","typescript"]}),window.katex=p;const Ht={modules:{syntax:{highlight:e=>c.highlightAuto(e).value},toolbar:{container:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["link","image","video","formula"],["clean"]],handlers:{}}},formats:["background","bold","color","font","code","italic","link","strike","underline","blockquote","header","indent","list","align","direction","code-block","image","video","formula"]};function Bt(e){const{placeholder:t="",minContentHeight:r=200,maxContentHeight:n=1e5,value:o="",onChange:i=(()=>{})}=e,[s,a]=l.exports.useState(),[c,p]=l.exports.useState(!1),[h,g]=l.exports.useState(o),m=l.exports.useRef({placeholder:t,value:o}),y=l.exports.useRef(h),v=l.exports.useRef(zt),x=l.exports.useRef(Ut);return y.current=h,l.exports.useEffect((()=>{(()=>{const e=document.querySelector(`.${v.current}`),t=null==e?void 0:e.querySelectorAll(`.${v.current} .ql-toolbar`);t instanceof NodeList&&t.forEach((e=>e.remove()))})(),(()=>{const{formats:e,modules:t}=Ht,{value:r,placeholder:n}=m.current,o=new f(`.${x.current}`,{formats:e,modules:t,placeholder:n,theme:"snow",readOnly:!1});a(o),(()=>{const e=o.theme.tooltip.root.querySelector("input[data-link]");e instanceof HTMLInputElement&&(e.dataset.link="https://my.example.com")})(),o.on("text-change",(()=>{var e;g((null==(e=null==o?void 0:o.root)?void 0:e.innerHTML)||"")})),o.getModule("toolbar").addHandler("image",(()=>{let e=o.container.querySelector("input.ql-image[type=file]");null===e&&(e=document.createElement("input"),e.classList.add("ql-image"),e.style.cssText="position:absolute;\n                                       z-index:-1;\n                                       opacity:0;",e.setAttribute("type","file"),e.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),e.addEventListener("change",(()=>{const{files:t}=e;if(!t||!t.length)return void console.log("No files selected");const r=t[0];r.size>5242880?d.error("单个文件大小不能超过 5MB"):(p(!0),o.enable(!1),Dt({key:"49e27928735c3bd80e8aa27349a34c5b",image:r}).then((({data:e})=>{if(e.display_url){const t=o.getSelection(!0);o.enable(!0),o.updateContents((new qt).retain(t.index).delete(t.length).insert("\n").insert({image:e.display_url}).insert("\n"),"user"),o.setSelection(t.index,1,"silent")}else d.error("图片上传失败")})).finally((()=>{p(!1),o.enable(!0),e.value=""})))})),o.container.appendChild(e)),e.click()})),o.setContents(o.clipboard.convert(r))})()}),[]),l.exports.useEffect((()=>{o!==y.current&&g(o||"")}),[o]),l.exports.useEffect((()=>{i(h)}),[s,h,i]),console.log(h),u.createElement("div",{className:v.current},u.createElement(b,{spinning:c},u.createElement("div",{className:x.current,style:{minHeight:+r,maxHeight:+n}})))}var Ft="uploadImage_2hxO1j",Qt="uploadImage__tips_Y1xcco",Wt="uploadImage__hideUploadBtn_2eEWe7",Vt="uploadImage__disabled_GgFrf3";function Xt(e){const o=e,{value:s=[],onChange:a=(()=>{}),showTips:c=!1,children:p=u.createElement(x,null,"上传"),imageAspect:f,maxFileSize:h=18874368,maxFileNum:g=1,needCropImage:m=!1,cropAspectRatio:b=1,accept:j="image/png,image/jpg,image/jpeg"}=o,w=((e,o)=>{var i={};for(var s in e)r.call(e,s)&&o.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&t)for(var s of t(e))o.indexOf(s)<0&&n.call(e,s)&&(i[s]=e[s]);return i})(o,["value","onChange","showTips","children","imageAspect","maxFileSize","maxFileNum","needCropImage","cropAspectRatio","accept"]),{className:E="",disabled:S}=w,A=l.exports.useRef(null),[L,C]=l.exports.useState(!1),[P,$]=l.exports.useState(),[T,M]=l.exports.useState(),[R,_]=l.exports.useState(!1),[N,I]=l.exports.useState([]),q=l.exports.useRef([]),D=k(Ft,{className:!!E,[Wt]:N.length>=g,[Vt]:S}),z=l.exports.useCallback((e=>!!(h&&e>h)&&(d.error("文件大小超过限制"),!0)),[h]),U=l.exports.useCallback((e=>!(!f||f===e)&&(d.error(`请上传尺寸为${f}px的图片`),!0)),[f]),H=l.exports.useCallback((()=>{null!==A.current&&M(new O(A.current,{viewMode:1,aspectRatio:b,dragMode:"move",toggleDragModeOnDblclick:!1,autoCropArea:1,cropBoxMovable:!0,cropBoxResizable:!0}))}),[A,b]),B=l.exports.useCallback((()=>{const e=`支持的扩展名: ${j.replace(/\b[^,]+?\//g,".").replace(/,/g,", ")}`,t=`单个图片大小不能超过 ${h/1024/1024}MB`,r=g>1?`最多可以上传 ${g} 份图片`:"";return c?u.createElement("div",{className:Qt},`${e}; ${t}; ${r}`):null}),[c,j,h,g]),F=i({accept:j,fileList:N,beforeUpload:e=>{return t=this,r=null,n=function*(){return z(e.size)||U(yield function(e){return new Promise((t=>{const r=new FileReader;r.onload=e=>{var r;const n=null==(r=e.target)?void 0:r.result,o=new Image;o.onload=()=>{const e=o.width||o.naturalWidth,r=o.height||o.naturalHeight;t(`${e}x${r}`)},o.src=n},r.readAsDataURL(e)}))}(e))?Promise.reject():m?(C(!0),$(URL.createObjectURL(e)),Promise.reject()):Promise.resolve()},new Promise(((e,o)=>{var i=e=>{try{a(n.next(e))}catch(t){o(t)}},s=e=>{try{a(n.throw(e))}catch(t){o(t)}},a=t=>t.done?e(t.value):Promise.resolve(t.value).then(i,s);a((n=n.apply(t,r)).next())}));var t,r,n},onChange:({fileList:e})=>{const t=[];e.forEach((e=>{if("done"===e.status)if(e.url)t.push({id:e.uid,name:e.name});else if(e.response){const{data:r}=e.response;t.push({id:r.fileId,name:r.name})}})),(s.length>0||t.length>0)&&a(t),I(e)},onPreview:e=>{console.log("onPreview",e),window.open(e.response.data.url,"_blank")},onRemove:()=>{const{disabled:e}=w;return!e},headers:{}},w);return l.exports.useEffect((()=>{if(s.length!==q.current.length){const e=[];s.forEach((t=>{const r=t.id;e.push({uid:t.id,name:t.name,status:"done",url:r,thumbUrl:r})})),I(e),q.current=s}}),[s]),u.createElement("div",{className:D},u.createElement(B,null),u.createElement(y,i({},F),p),u.createElement(v,{title:"图片裁剪",visible:L,onOk:()=>{T&&T.getCroppedCanvas().toBlob((e=>{_(!0),Dt({key:"49e27928735c3bd80e8aa27349a34c5b",image:e}).then((({data:t})=>{console.log("uploadImage & crop Response:",t),t.url?(C(!1),I((r=>{const n=[...r],o=n.pop();return[...n,{uid:t.id,name:null==o?void 0:o.name,status:"done",response:{data:t},thumbUrl:URL.createObjectURL(e)}]}))):d.error("图片上传失败")})).finally((()=>{_(!1)}))}),"image/jpeg")},onCancel:()=>{I((e=>{const t=[...e];return t.pop(),[...t]})),C(!1)},destroyOnClose:!0,maskClosable:!1,okText:"确认上传",okButtonProps:{loading:R},cancelText:"取消"},u.createElement("div",null,u.createElement("img",{style:{maxWidth:"100%"},src:P,onLoad:H,ref:A,alt:"图片"}))))}var Yt={};const{Panel:Gt}=w;function Jt(){const[e,t]=l.exports.useState({a:{b:"xxxxx message"}}),r=[{title:"QuillEditor 富文本编辑器",children:u.createElement(Bt,{value:'<h2 class="ql-align-center"><strong><em><s><u>sa </u></s>是 撒风的</em></strong><strong style="background-color: rgb(255, 255, 102);"><em>范德萨发顺丰</em></strong></h2><p class="ql-align-center"><span class="ql-formula" data-value="e=mc^2"><span contenteditable="false"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi><mo>=</mo><mi>m</mi><msup><mi>c</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">e=mc^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathnormal">e</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.814108em; vertical-align: 0em;"></span><span class="mord mathnormal">m</span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.814108em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span></span> </p><p><span style="color: rgb(198, 120, 221);">type</span> <span style="color: rgb(229, 192, 123);">QuillEditorProps</span></p><p>&lt;h2&gt;&lt;strong&gt;&lt;/h2&gt;dfds<a href="http://baidu.com" rel="noopener noreferrer" target="_blank">fdsfdsfds</a></p><p><img width="300" src="https://i.ibb.co/rbFTXB4/Ux-Hol6-Sw-Ly-M.jpg"></p>',minContentHeight:"300"})},{title:"ErrorBoundary 捕获组件树异常",children:u.createElement("div",null,u.createElement("button",{onClick:()=>{t({})}},"点我测试ErrorBoundary组件"),u.createElement("h2",null,e.a.b))},{title:"UploadImage 上传图片",children:u.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},u.createElement(Xt,{action:"https://api.imgbb.com/1/upload",data:{key:"49e27928735c3bd80e8aa27349a34c5b"},name:"image"}),u.createElement(Xt,{needCropImage:!0},u.createElement(x,null,"上传（裁剪）")))}];return u.createElement(s,{className:Yt.ComponentListPage},u.createElement(j,{title:"组件列表"},u.createElement(w,{accordion:!0},r.map((e=>u.createElement(Gt,{header:e.title,key:e.title},e.children))))))}export{Jt as default};
